(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){},112:function(e,t,a){e.exports=a.p+"static/media/img.5e202957.jpg"},113:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),c=a.n(o),l=a(15),i=(a(100),a(7)),s=a(34),u=a(151),m=a(85),p=a(157),d=a(166),g=a(6),f=a.n(g),h=a(10),b=a(153),v=a(154),E=a(156),j=a(155),x=a(73),y=a.n(x),O=a(81),w=a(150),C=a(72),k=a.n(C),N=(a(104),Object(O.a)({palette:{primary:{main:"rgb(49, 54, 57)"},secondary:{main:"#11cb5f"}}})),S=Object(n.createContext)(localStorage.isLogged),I=Object(n.createContext)(!0),A=Object(n.createContext)("bla");var R=function(e){var t=e.children,a=Object(n.useState)(localStorage.isLogged),o=Object(i.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)(!0),u=Object(i.a)(s,2),m=u[0],p=u[1],d=r.a.createRef();return r.a.createElement(I.Provider,{value:[m,p]},r.a.createElement(S.Provider,{value:[c,l]},r.a.createElement(k.a,{ref:d}),r.a.createElement(A.Provider,{value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success";d.current.addNotification({title:t,message:e,type:a,insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:3e3},dismissable:{click:!0}})}},r.a.createElement(w.a,{theme:N},t))))},F=Object(u.a)(function(e){return{root:{flexGrow:1,marginBottom:"10px"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,color:"#fff",textDecoration:"none"},link:{color:"#fff",textDecoration:"none"}}});var L=Object(s.g)(function(e){var t=F(),a=Object(n.useContext)(I),o=Object(i.a)(a,2),c=o[0],s=o[1],u=Object(n.useContext)(S),m=Object(i.a)(u,2);return m[0],m[1],Object(n.useEffect)(function(){function e(){return(e=Object(h.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),s(!1)},[c]),r.a.createElement("div",{className:t.root},r.a.createElement(b.a,{position:"static"},r.a.createElement(v.a,null,r.a.createElement(j.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(y.a,null)),r.a.createElement(l.b,{color:"inherit",className:t.title,to:"/"},"Home"),"true"===localStorage.isLogged?r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{color:"inherit"},r.a.createElement(l.b,{className:t.link,to:"/profile"},"Profile")),r.a.createElement(E.a,{color:"inherit"},r.a.createElement(l.b,{className:t.link,to:"/profile/annotations"},"Annotations")),r.a.createElement(E.a,{color:"inherit",onClick:function(){e.history.push("/logged-out")}},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{color:"inherit"},r.a.createElement(l.b,{className:t.link,to:"/login"},"Log in")),r.a.createElement(E.a,{color:"inherit"},r.a.createElement(l.b,{className:t.link,to:"/register"},"Register"))))))}),T=Object(u.a)(function(e){return{footer:{border:"1px solid #000",textAlign:"center",width:"100%",bottom:"1px",color:"#fff",background:e.palette.primary.main},p:{margin:"2px"}}});var B=function(e){var t=T(),a=Object(n.useState)(!0),o=Object(i.a)(a,2),c=o[0],l=o[1];return Object(n.useEffect)(function(){function e(){return(e=Object(h.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),l(!1)},[c]),r.a.createElement("div",{className:t.footer},r.a.createElement("p",{className:t.p},"Ethics Net - 2019"))},D=a(25),P=a(35),W=(a(3),a(169)),U=(a(71),"http://167.71.163.123"),z=Object(u.a)(function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"47%"},submit:{marginTop:"20px"},loaderWrapper:{height:"100vh",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}}});var q=function(e){var t=z(),a=Object(n.useContext)(S),o=Object(i.a)(a,2),c=(o[0],o[1],Object(n.useContext)(A)),l=Object(n.useState)(!1),s=Object(i.a)(l,2),u=s[0],m=(s[1],r.a.useState({firstName:"",lastName:"",email:"",password:"",age:""})),d=Object(i.a)(m,2),g=d[0],b=d[1],v=function(e){return function(t){b(Object(P.a)({},g,Object(D.a)({},e,t.target.value)))}};Object(n.useEffect)(function(){console.log(g)},[g]);var j=function(){var e=Object(h.a)(f.a.mark(function e(t){var a,n,r,o,l;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=g,t.preventDefault(),console.log("".concat(U,"/auth/register")),e.prev=3,e.next=6,fetch("".concat(U,"/auth/register"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(a)});case 6:return n=e.sent,e.next=9,n.json();case 9:r=e.sent,400===n.status?c(r.error,"registration failed","danger"):200===n.status?(c("welcome to ethics net!"),o=r.token,l=r.user,localStorage.setItem("userId",l._id),localStorage.setItem("userName",l.firstName),localStorage.setItem("isLogged","true"),localStorage.setItem("token",o),window.location.reload()):c("there was an error","we could not register you","danger"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[3,13]])}));return function(t){return e.apply(this,arguments)}}();return u?r.a.createElement("div",{className:t.loaderWrapper},r.a.createElement(p.a,null)):r.a.createElement("div",{className:t.container},r.a.createElement("header",{className:"App-header"},r.a.createElement("p",null,"Ethics eth - sign up")),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:j},r.a.createElement("div",null,r.a.createElement(W.a,{required:!0,className:t.textField,id:"first-name",label:"First Name",value:g.firstName,onChange:v("firstName"),margin:"normal"}),r.a.createElement(W.a,{required:!0,className:t.textField,id:"last-name",label:"Last Name",value:g.lastName,onChange:v("lastName"),margin:"normal"})),r.a.createElement("div",null,r.a.createElement(W.a,{required:!0,className:t.textField,id:"email",type:"email",label:"Email",value:g.email,onChange:v("email"),margin:"normal"}),r.a.createElement(W.a,{required:!0,className:t.textField,id:"password",type:"password",label:"Password",value:g.password,onChange:v("password"),margin:"normal"})),r.a.createElement(E.a,{className:t.submit,type:"submit",variant:"contained",color:"primary"},"Sign up")))},G=Object(u.a)(function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"47%"},submit:{marginTop:"20px"},loaderWrapper:{height:"50vh",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}}});var J=function(e){var t=G(),a=Object(n.useState)(!1),o=Object(i.a)(a,2),c=o[0],l=(o[1],Object(n.useContext)(A)),s=Object(n.useContext)(S),u=Object(i.a)(s,2),m=(u[0],u[1],r.a.useState({email:"",password:""})),d=Object(i.a)(m,2),g=d[0],b=d[1],v=function(e){return function(t){b(Object(P.a)({},g,Object(D.a)({},e,t.target.value)))}};Object(n.useEffect)(function(){function e(){return(e=Object(h.a)(f.a.mark(function e(){var t,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(U));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.log("response -> ",t),console.log("json",a);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]);var j=function(){var e=Object(h.a)(f.a.mark(function e(t){var a,n,r,o,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=g,t.preventDefault(),e.prev=2,e.next=5,fetch("".concat(U,"/auth/authenticate"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(a)});case 5:return n=e.sent,e.next=8,n.json();case 8:r=e.sent,400===n.status?(l(r.error,"login failed","danger"),console.log("status -> ",n.status,r)):200===n.status?(l("welcome back!"),o=r.token,c=r.user,localStorage.setItem("userId",c._id),localStorage.setItem("userName",c.firstName),localStorage.setItem("isLogged","true"),localStorage.setItem("token",o),window.location.reload()):l("there was an error","we could not log you in","danger"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[2,12]])}));return function(t){return e.apply(this,arguments)}}();return c?r.a.createElement("div",{className:t.loaderWrapper},r.a.createElement(p.a,null)):r.a.createElement("div",{className:t.container},r.a.createElement("header",{className:"App-header"},r.a.createElement("p",null,"Ethics eth - login")),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:j},r.a.createElement("div",null,r.a.createElement(W.a,{required:!0,className:t.textField,id:"email",label:"Email",type:"email",value:g.email,onChange:v("email"),margin:"normal"}),r.a.createElement(W.a,{required:!0,className:t.textField,type:"password",id:"password",label:"Password",value:g.password,onChange:v("password"),margin:"normal"})),r.a.createElement(E.a,{className:t.submit,type:"submit",variant:"contained",color:"primary"},"login")))},M=Object(u.a)(function(e){return{loaderWrapper:{height:"50vh",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},header:{textAlign:"center"},textField:{width:"330px",marginLeft:e.spacing(1),marginRight:e.spacing(1)}}});var _=function(e){var t=M(),a=Object(n.useState)(!0),o=Object(i.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)({}),u=Object(i.a)(s,2),m=(u[0],u[1]),d=Object(n.useState)({name:"",last:"",email:""}),g=Object(i.a)(d,2),b=g[0],v=g[1],j=function(e){return function(t){v(Object(P.a)({},b,Object(D.a)({},e,t.target.value)))}};Object(n.useEffect)(function(){function e(){return(e=Object(h.a)(f.a.mark(function e(){var t,a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,fetch("".concat(U,"/api/user"),{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,console.log("FETCHED USER -> ",n),m(n.user),v(Object(P.a)({},b,{name:n.user.firstName,last:n.user.lastName,email:n.user.email})),l(!1);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[c]);var x=function(){var e=Object(h.a)(f.a.mark(function e(t){var a,n,r,o,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={firstName:b.name,lastName:b.last,email:b.email},n=localStorage,r=n.token,o=n.userId,e.next=5,fetch("".concat(U,"/api/user/").concat(o),{method:"PUT",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(a)});case 5:return c=e.sent,e.next=8,c.json();case 8:e.sent;case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return c?r.a.createElement("div",{className:t.loaderWrapper},r.a.createElement(p.a,null)):r.a.createElement("div",{className:t.container},r.a.createElement("header",{className:t.header},"ETHICS ETH - MY PROFILE"),r.a.createElement("main",null,r.a.createElement("form",{onSubmit:x},r.a.createElement("div",null,r.a.createElement(W.a,{id:"standard-name",label:"First name",className:t.textField,value:b.name,onChange:j("name"),margin:"normal",required:!0}),r.a.createElement(W.a,{id:"standard-name",label:"Last name",className:t.textField,value:b.last,onChange:j("last"),margin:"normal",required:!0})),r.a.createElement("div",null,r.a.createElement(W.a,{style:{width:"330px",marginBottom:"20px"},id:"standard-name",label:"Email",className:t.textField,value:b.email,onChange:j("email"),margin:"normal",type:"email",required:!0})),r.a.createElement(E.a,{color:"primary",variant:"outlined",style:{marginRight:"10px"},type:"submit"},"Save"),r.a.createElement(E.a,{color:"secondary",type:"button",variant:"outlined"},"Delete account"))))},H=a(165),Y=a(170),$=a(164),K=a(162),Q=a(163),V=a(161),X=a(160),Z=r.a.forwardRef(function(e,t){return r.a.createElement(X.a,Object.assign({direction:"up",ref:t},e))});function ee(e){var t=e.open,a=e.handleClose,o=e.content,c=e.id,l=e.filterAnotations,i=e.elId;Object(n.useEffect)(function(){console.log("dialog opened...",e.open),console.log("hello"),console.log("id -> ",c)},[c,e.open]);var s=function(){var e=Object(h.a)(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage,n=t.token,e.next=4,fetch("".concat(U,"/api/user/anotations/").concat(c),{method:"DELETE",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 4:return r=e.sent,e.next=7,r.json();case 7:e.sent,l(c),a(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(Y.a,{open:t&&i===c,TransitionComponent:Z,keepMounted:!0,onClose:a,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(V.a,{id:"alert-dialog-slide-title"},"Are you sure you want to detele this anotation?"),r.a.createElement(K.a,null,r.a.createElement(Q.a,{id:"alert-dialog-slide-description"},'"',o,'"')),r.a.createElement($.a,null,r.a.createElement(E.a,{onClick:a,color:"secondary"},"Cancel"),r.a.createElement(E.a,{onClick:s,color:"primary"},"Delete"))))}var te=Object(u.a)(function(e){return{paper:{padding:e.spacing(3,2),margin:"20px 20px","&:hover":{boxShadow:"0px 0px 5px 2px rgba(0,0,0,0.4)",cursor:"pointer"}},title:{textAlign:"center"},loaderWrapper:{height:"50vh",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},category:{background:"#282828",color:"#fff",padding:"4px",borderRadius:"5px",fontSize:"13px"},date:{fontSize:"12px"}}});var ae=function(e){var t=te(),a=Object(n.useState)([]),o=Object(i.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)(!0),u=Object(i.a)(s,2),m=u[0],d=u[1],g=Object(n.useState)(!1),b=Object(i.a)(g,2),v=b[0],j=b[1],x=Object(n.useState)(""),y=Object(i.a)(x,2),O=y[0],w=y[1];function C(e){console.log("id to remove-> ",e),l(c.filter(function(t){return t._id!==e}))}function k(){j(!1)}Object(n.useEffect)(function(){function e(){return(e=Object(h.a)(f.a.mark(function e(){var t,a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,fetch("".concat(U,"/api/user/anotations"),{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,console.log(n),l(n.anotations),d(!1);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[m]);var N=function(t,a){"edit"===a?e.history.push("/profile/annotations/edit/".concat(t)):"delete"===a&&(console.log("delete id ->",t),w(t),j(!0))},S=c.map(function(e){return r.a.createElement(H.a,{className:t.paper,key:e._id},r.a.createElement(ee,{content:e.content,open:v,handleClose:k,id:O,elId:e._id,filterAnotations:C}),r.a.createElement("span",{className:t.category},e.category),r.a.createElement("p",null," ",e.content," "),r.a.createElement("p",{className:t.date}," ",e.createdAt.substring(0,10)," "),r.a.createElement("div",null,r.a.createElement(E.a,{color:"primary",variant:"outlined",style:{marginRight:"10px"},onClick:function(){return N(e._id,"edit")}},"Edit"),r.a.createElement(E.a,{color:"secondary",variant:"outlined",onClick:function(){return N(e._id,"delete")}},"Delete")))});return m?r.a.createElement("div",{className:t.loaderWrapper},r.a.createElement(p.a,null)):r.a.createElement("div",null,r.a.createElement("h3",{className:t.title},"Annotations"),r.a.createElement("div",null,S))};var ne=function(){return r.a.createElement("div",{style:{height:"80vh",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"30px",textAlign:"center"}},"404 ",r.a.createElement("br",null)," not found")};Object(u.a)(function(e){return{paper:{background:"red"}}});var re=Object(u.a)(function(e){return{link:{color:"inherit",textDecoration:"none"},button:{marginRight:"10px"},loaderWrapper:{height:"50vh",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}}});function oe(e){var t=re();return r.a.createElement(E.a,{className:t.button,variant:e.variant,color:e.color},r.a.createElement(l.b,{className:t.link,to:e.to},e.name))}function ce(e){var t=re();return r.a.createElement("div",{className:t.loaderWrapper},r.a.createElement(p.a,null))}var le=Object(u.a)(function(e){return{paper:{background:"red","@media (min-width:600px)":{}},textField:{width:"100%"},link:{color:"inherit",textDecoration:"none"},button:{marginRight:"10px"}}});var ie=function(e){var t=le(),a=Object(n.useState)({}),o=Object(i.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)(""),u=Object(i.a)(s,2),m=u[0],p=u[1],d=Object(n.useState)(!0),g=Object(i.a)(d,2),b=g[0],v=g[1],j=Object(n.useContext)(A);Object(n.useEffect)(function(){function t(){return(t=Object(h.a)(f.a.mark(function t(){var a,n,r,o,c;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return localStorage.isLogged,a=e.match.params.id,n=localStorage,r=n.token,t.next=5,fetch("".concat(U,"/api/user/anotations/").concat(a),{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});case 5:return o=t.sent,t.next=8,o.json();case 8:c=t.sent,l(c.anotation),p(c.anotation.content),v(!1);case 12:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){t.apply(this,arguments)}()},[b,e.match.params]);var x=function(){var t=Object(h.a)(f.a.mark(function t(){var a,n,r,o,c;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return v(!0),a=e.match.params.id,n=localStorage,r=n.token,t.next=5,fetch("".concat(U,"/api/user/anotations/").concat(a),{method:"PUT",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({content:m})});case 5:return o=t.sent,console.log(o.status),t.next=9,o.json();case 9:c=t.sent,200===o.status?j("annotation saved!"):(console.log("there was an error",o.status),j(c.error,"there was an error","danger"));case 11:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return e.match.params.id,b?r.a.createElement(ce,null):r.a.createElement("div",null,r.a.createElement("p",null,c.createdAt.substring(0,10)),r.a.createElement(W.a,{id:"standard-multiline-flexible",label:"edit anotation",multiline:!0,rowsMax:"30",value:m,onChange:function(e){p(e.target.value)},className:t.textField,margin:"normal"}),r.a.createElement(E.a,{onClick:x,variant:"outlined",color:"primary",className:t.button},"Save"),r.a.createElement(oe,{variant:"outlined",color:"secondary",to:"/profile/annotations",name:"cancel"}))},se=a(86),ue=Object(u.a)(function(e){return{root:{color:"rgb(50, 50, 50)"},title:{color:"rgba(196, 196, 196)"},link:{color:"inherit",textDecoration:"none"}}});var me=function(e){var t=ue(),a=Object(n.useState)(!0),o=Object(i.a)(a,2),c=o[0];return o[1],Object(n.useEffect)(function(){function e(){return(e=Object(h.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[c]),r.a.createElement("div",{className:t.root},r.a.createElement(se.a,{className:t.title,variant:"h5",gutterBottom:!0},"Ethics Net"),r.a.createElement(se.a,{variant:"body1",gutterBottom:!0},"Welcome to Ethics Net, now you can start to anotate things on the web."),r.a.createElement(E.a,{color:"primary",variant:"outlined",style:{marginRight:"10px"}},r.a.createElement(l.b,{className:t.link,to:"/profile/annotations"},"Annotations")),r.a.createElement(E.a,{color:"primary",variant:"outlined",style:{marginRight:"10px"}},r.a.createElement(l.b,{className:t.link,to:"/annotations/new"},"Insert new annotation")),r.a.createElement(E.a,{color:"primary",variant:"outlined",style:{marginRight:"10px"}},r.a.createElement(l.b,{className:t.link,to:"/profile"},"Profile")))},pe=(a(75),Object(u.a)(function(e){return{paper:{background:"red"}}}));var de=function(e){var t=pe(),a=Object(n.useState)(!0),o=Object(i.a)(a,2),c=o[0],l=o[1],s=Object(n.useContext)(S),u=Object(i.a)(s,2),m=u[0],p=u[1];return Object(n.useEffect)(function(){function e(){return(e=Object(h.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(l);case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),console.log("is logged -> ",m),console.log("LOGGED OUT FROM REACT APP!")},[m,c]),"true"===localStorage.isLogged?r.a.createElement("div",{className:t.root},r.a.createElement("h1",null,"are you sure you want to log out?"),r.a.createElement(E.a,{style:{marginRight:"10px"},color:"primary",variant:"outlined",onClick:function(){console.log("handling logout"),localStorage.isLogged=null,p(!1),window.location.reload()}},"Yes, log out"),r.a.createElement(E.a,{color:"secondary",variant:"outlined",onClick:function(){console.log("redirect home!")}},"No, keep logged in")):r.a.createElement("div",{className:t.root},r.a.createElement("h1",null,"you're logged out!"))},ge=a(159),fe=a(172),he=a(167),be=a(171),ve=Object(u.a)(function(e){return{paper:{background:"red"},textField:{width:"100%"},link:{color:"inherit",textDecoration:"none"},loaderWrapper:{height:"50vh",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}}});var Ee=function(e){var t=ve(),a=Object(n.useState)(!0),o=Object(i.a)(a,2),c=o[0],s=o[1],u=Object(n.useState)(""),m=Object(i.a)(u,2),p=m[0],d=m[1],g=Object(n.useState)(0),b=Object(i.a)(g,2),v=b[0],j=b[1],x=Object(n.useContext)(A);Object(n.useEffect)(function(){s(!1),x("welcome back!")},[]);var y=function(){var t=Object(h.a)(f.a.mark(function t(a){var n,r,o,c,l;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),s(!0),n=localStorage,r=n.token,o=n.userId,c={category:{0:"morally preferable",1:"morally unpreferable",2:"aesthetically preferable",3:"aesthetically unpreferable"}[v],content:p,authorId:o},t.prev=5,t.next=8,fetch("".concat(U,"/api/post-text"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(c)});case 8:if(l=t.sent,console.log(l.status),200!==l.status){t.next=18;break}return t.next=13,l.json();case 13:t.sent,x("annotation created!"),e.history.push("/profile/annotations"),t.next=19;break;case 18:console.log("error while fetching data!");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(5),console.log("there was an error ->",t.t0);case 24:console.log("submiting!");case 25:case"end":return t.stop()}},t,null,[[5,21]])}));return function(e){return t.apply(this,arguments)}}();return c?r.a.createElement(ce,null):r.a.createElement("div",{className:t.root},r.a.createElement(se.a,{variant:"h6",gutterBottom:!0},"Create a new annotation"),r.a.createElement("form",{onSubmit:y},r.a.createElement(W.a,{id:"standard-name",label:"Anotation",className:t.textField,value:p,onChange:function(e){d(e.target.value)},margin:"normal",required:!0,multiline:!0,rows:"5"}),r.a.createElement(ge.a,{className:t.formControl},r.a.createElement(fe.a,{htmlFor:"age-simple"},"Age"),r.a.createElement(he.a,{value:v,onChange:function(e){return j(e.target.value)},inputProps:{name:"age",id:"age-simple"}},r.a.createElement(be.a,{selected:!0,value:0},"Morally preferable"),r.a.createElement(be.a,{value:1},"Morally unpreferable"),r.a.createElement(be.a,{value:2},"Aesthetically preferable"),r.a.createElement(be.a,{value:3},"Aesthetically unpreferable"))),r.a.createElement(E.a,{color:"primary",variant:"outlined",style:{marginRight:"10px"},type:"submit"},"Save"),r.a.createElement(E.a,{color:"secondary",type:"button",variant:"outlined"},r.a.createElement(l.b,{className:t.link,to:"/"},"Cancel"))))},je=a(76),xe=a(77),ye=a(82),Oe=a(78),we=a(83),Ce=a(79),ke=a.n(Ce),Ne=(a(111),a(112),function(e){function t(){var e,a;Object(je.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(ye.a)(this,(e=Object(Oe.a)(t)).call.apply(e,[this].concat(o)))).state={showBtn:"none",loading:!0,src:"",croppedImageUrl:"",crop:{unit:"%",width:30}},a.onSelectFile=function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",function(){return a.setState({src:t.result})}),t.readAsDataURL(e.target.files[0])}},a.onImageLoaded=function(e){a.imageRef=e},a.onCropComplete=function(e){a.makeClientCrop(e)},a.onCropChange=function(e,t){a.setState({crop:e})},a.saveCroppedScreenshot=function(){console.log("should save cropped screenshot"),console.log(a.state.croppedImageUrl)},a.renderSelectionAddon=function(){var e;return r.a.createElement(E.a,(e={color:"primary",type:"button",variant:"contained"},Object(D.a)(e,"type","button"),Object(D.a)(e,"style",{position:"absolute",bottom:-45,right:0}),Object(D.a)(e,"onClick",a.saveCroppedScreenshot),e),"Save Image")},a}return Object(we.a)(t,e),Object(xe.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("component did mount!"),function(){var t=Object(h.a)(f.a.mark(function t(){var a,n,r,o;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=localStorage,n=a.token,a.userId,t.next=4,fetch("".concat(U,"/api/user"),{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 4:return r=t.sent,t.next=7,r.json();case 7:o=t.sent,200===r.status&&(console.log(o),e.setState({src:o.user.cachedImg,loading:!1})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log("there was an error -> ",t.t0);case 14:case"end":return t.stop()}},t,null,[[0,11]])}));return function(){return t.apply(this,arguments)}}()()}},{key:"makeClientCrop",value:function(){var e=Object(h.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.imageRef&&t.width&&t.height)){e.next=7;break}return e.next=3,this.getCroppedImg(this.imageRef,t,"newFile.jpeg");case 3:a=e.sent,this.setState({croppedImageUrl:a,showBtn:"block"}),console.log("crop is done!"),console.log(this.state.showBtn);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getCroppedImg",value:function(e,t,a){var n=this,r=document.createElement("canvas"),o=e.naturalWidth/e.width,c=e.naturalHeight/e.height;return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(e,t.x*o,t.y*c,t.width*o,t.height*c,0,0,t.width,t.height),new Promise(function(e,t){r.toBlob(function(t){t?(t.name=a,window.URL.revokeObjectURL(n.fileUrl),n.fileUrl=window.URL.createObjectURL(t),e(n.fileUrl)):console.error("Canvas is empty")},"image/jpeg")})}},{key:"render",value:function(){var e=this.state,t=e.crop,a=e.croppedImageUrl,n=e.src;return this.state.loading?r.a.createElement(ce,null):r.a.createElement("div",{style:{position:"absolute",width:"100%",left:"0",top:"82px"}},n&&r.a.createElement(ke.a,{src:n,crop:t,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange,renderSelectionAddon:this.renderSelectionAddon}),a&&r.a.createElement("img",{alt:"Crop",style:{width:"auto"},src:a}))}}]),t}(n.PureComponent)),Se=a(80),Ie=a.n(Se),Ae=a(61),Re=function(e){var t=e.component,a=e.restricted,n=Object(Ae.a)(e,["component","restricted"]);return r.a.createElement(s.b,Object.assign({},n,{render:function(e){return"true"===localStorage.isLogged&&a?r.a.createElement(s.a,{to:"/"}):r.a.createElement(t,e)}}))},Fe=function(e){var t=e.component,a=Object(Ae.a)(e,["component"]);return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return"true"===localStorage.getItem("isLogged")?r.a.createElement(t,e):r.a.createElement(s.a,{to:"/login"})}}))},Le=Object(u.a)(function(e){return{root:{minHeight:"calc(100vh - 128px)"},paper:{padding:e.spacing(3,2),margin:"20px auto"},loaderWrapper:{height:"calc(100vh - 98px)",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}}});var Te=function(){var e=Le(),t=Object(n.useContext)(I),a=Object(i.a)(t,2),o=a[0];return a[1],o?r.a.createElement(r.a.Fragment,null,r.a.createElement(L,null),r.a.createElement("div",{className:e.loaderWrapper},r.a.createElement(p.a,null)),r.a.createElement(B,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(L,null),r.a.createElement(d.a,{className:e.root,maxWidth:"md"},r.a.createElement(m.a,{className:e.paper,elevation:2},r.a.createElement(s.d,null,r.a.createElement(Fe,{exact:!0,path:"/",component:me}),r.a.createElement(Re,{exact:!0,path:"/register",restricted:!0,component:q}),r.a.createElement(Re,{exact:!0,path:"/login",restricted:!0,component:J}),r.a.createElement(Fe,{exact:!0,path:"/profile",component:_}),r.a.createElement(s.b,{exact:!0,path:"/logged-out",component:de}),r.a.createElement(Fe,{exact:!0,path:"/profile/annotations",component:ae}),r.a.createElement(Fe,{exact:!0,path:"/profile/anotations",component:ae}),r.a.createElement(Fe,{exact:!0,path:"/annotations/new",component:Ee}),r.a.createElement(Fe,{exact:!0,path:"/profile/anotations",component:Ie.a}),r.a.createElement(Fe,{exact:!0,path:"/image/new",component:Ne}),r.a.createElement(Fe,{exact:!0,path:"/profile/annotations/edit/:id",component:ie}),r.a.createElement(s.b,{component:ne})))),r.a.createElement(B,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(l.a,null,r.a.createElement(R,null,r.a.createElement(Te,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},71:function(e,t,a){},80:function(e,t){},95:function(e,t,a){e.exports=a(113)}},[[95,1,2]]]);
//# sourceMappingURL=main.f1778e58.chunk.js.map